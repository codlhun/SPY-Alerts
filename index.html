<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>0DTE SPY Alert System</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
            margin: 0;
            padding: 0;
        }
        header {
            background-color: #222;
            color: white;
            padding: 20px;
            text-align: center;
        }
        .container {
            max-width: 1200px;
            margin: auto;
            padding: 20px;
        }
        .alert-box {
            background-color: #eee;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
        }
        .alert-header {
            font-weight: bold;
            font-size: 1.2em;
        }
        .alert-details {
            margin-top: 10px;
        }
        .historical-data {
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
        }
        .historical-data h2 {
            font-size: 1.5em;
            margin-bottom: 20px;
        }
        footer {
            background-color: #222;
            color: white;
            padding: 10px;
            text-align: center;
            position: relative;
            bottom: 0;
            width: 100%;
        }
    </style>
</head>
<body>

    <header>
        <h1>SPY 0DTE Alert System</h1>
        <p>Only the highest probability 0DTE call and put setups delivered daily.</p>
    </header>

    <div class="container">
        <!-- Alert Section -->
        <div class="alert-box" id="alert-box">
            <div class="alert-header">New Trade Alert!</div>
            <div class="alert-details">
                <span><strong>Trade Type:</strong> Loading...</span>
                <span><strong>Strike:</strong> Loading...</span>
                <span><strong>Expiration:</strong> Today</span>
                <span><strong>IV Rank:</strong> Loading...</span>
                <span><strong>Volume Spike:</strong> Loading...</span>
            </div>
            <div class="alert-details">
                <span><strong>Breakeven Prices:</strong> Loading...</span>
                <span><strong>Stop Loss:</strong> Loading...</span>
                <span><strong>Target Profit:</strong> Loading...</span>
            </div>
        </div>

        <!-- Historical Data Section -->
        <div class="historical-data">
            <h2>SPY Historical Volatility and Price Data</h2>
            <p id="historical-data">Loading historical data...</p>
        </div>
    </div>

    <footer>
        <p>SPY 0DTE Alert System &copy; 2024</p>
    </footer>

    <script>
        // Your Tradier API Access Token
        const accessToken = 'WnVoKrmtMzuZccBpDluvyLj6w6RH';  // Replace with your Tradier API token

        async function fetchOptionsData() {
            try {
                const response = await fetch(`https://api.tradier.com/v1/markets/options?symbol=SPY`, {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${accessToken}`,
                        'Accept': 'application/json'
                    }
                });

                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }

                const data = await response.json();
                console.log(data);  // Log the data for debugging

                // Process the options data here
                // For demonstration, using dummy values
                const tradeAlert = {
                    tradeType: "Straddle", // Replace with actual trade type
                    strike: data.options[0]?.strike || "N/A", // Example, adapt based on actual data structure
                    ivRank: data.options[0]?.impliedVolatility || "N/A", // Example
                    volumeSpike: data.options[0]?.volume || "N/A", // Example
                    breakeven: "578 / 563", // Example values
                    stopLoss: "Breakeven", // Example
                    targetProfit: "20% Gain" // Example
                };

                // Update the alert box with fetched data
                document.querySelector('#alert-box .alert-details span:nth-child(1)').textContent = `Trade Type: ${tradeAlert.tradeType}`;
                document.querySelector('#alert-box .alert-details span:nth-child(2)').textContent = `Strike: ${tradeAlert.strike}`;
                document.querySelector('#alert-box .alert-details span:nth-child(4)').textContent = `IV Rank: ${tradeAlert.ivRank}`;
                document.querySelector('#alert-box .alert-details span:nth-child(5)').textContent = `Volume Spike: ${tradeAlert.volumeSpike}`;
                document.querySelector('#alert-box .alert-details span:nth-child(7)').textContent = `Breakeven Prices: ${tradeAlert.breakeven}`;
                document.querySelector('#alert-box .alert-details span:nth-child(8)').textContent = `Stop Loss: ${tradeAlert.stopLoss}`;
                document.querySelector('#alert-box .alert-details span:nth-child(9)').textContent = `Target Profit: ${tradeAlert.targetProfit}`;

                // Update historical data section
                document.getElementById('historical-data').textContent = 'Average Daily Price Moves Over Last 5 Days: +1.2% / -0.9%';
            } catch (error) {
                console.error('Error fetching options data:', error);
                alert('Failed to fetch options data. Check console for details.');
            }
        }

        // Call the function to fetch options data
        fetchOptionsData();
    </script>

</body>
</html>
